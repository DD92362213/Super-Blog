<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="../css/login.css">
    <title>Document</title>
</head>

<body>
    <div class="container">

        <div class="left">
            <div class="callBox">
                <p>Call Us</p>
                <p>bornashes@gmail.com</p>
            </div>
        </div>
        <div class="right">
            <div class="user">

            </div>
            <div class="con">
                <div class="botton">
                    <div class="select0 select">
                        <div>
                            <button id="bt1" class="visimg vis_img visimg2"><img src="../img/visitor.png"></button>
                        </div>
                        <div>
                            <button id="bt2" class="leaimg lea_img "><img src="../img/leaguer.png"></button>
                        </div>
                    </div>
                    <div class="text01">
                        <div class="text1 visitor">
                            游客身份访问本站<br>
                            快速浏览博客文章
                        </div>
                        <div class="text2 leaguer">
                            已有本站账号<br>
                            立刻登录体验
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</body>
<script src="../js/ajax.js"></script>
<script src="../js/cookie_tools.js"></script>
<script>
    var ip = 'http://127.0.0.1:3020/';
    var event1 = new eventEmitter(); //from ajax.js
    ajax(ip + "getLogin", 'get', null, function (data) {
        let user = document.querySelector('.user');
        let right = document.querySelector('.right');
        let left = document.querySelector('.left');
        if (data.srcElement.readyState == 4) {
            user.innerHTML = data.srcElement.response;
            console.log(event1)
            event1.emit('create', { flag: 1, right: right });
            document.querySelector('.text1').classList.add('fad');
            document.querySelector('.text1').classList.add('visitor_cg');
            document.querySelector('.text1').classList.remove('visitor');
        }
    });
    event1.on('create', function (data) {
        if (data.flag == 1) {
            document.getElementById('login').addEventListener('click', function () {
                var login = {
                    userAccount: document.getElementById('useraccount').value,
                    password: document.getElementById('password').value
                }
                login = JSON.stringify(login);
                ajax(ip + 'login', 'post', login, (data1) => {
                    if (data1.srcElement.readyState == 4) {
                        console.log(data1.srcElement)
                        if (getCookieItem('loginFlag') == '1') {
                            let container = document.querySelector('.container');
                            // window.location.href = ip + 'index'
                            // console.log(data.element)
                            container.classList.add('loginAnimation')
                            setTimeout(function () {
                                container.classList.add('loginFinish');
                                data.right.innerHTML = '<div class="contentBox">' + data1.srcElement.response + '</div>';
                            }, 750);
                        }
                    }
                });
            });
        }
    });

     // ----------------------------------------------------------------------------
     document.getElementById('bt1').onmouseover = function () {
        document.querySelector('.text1').classList.add('fad');
        document.querySelector('.text1').classList.add('visitor_cg');
        document.querySelector('.text1').classList.remove('visitor');
    }
    document.getElementById('bt1').onmouseout = function () {
        document.querySelector('.text1').classList.remove('fad');
        document.querySelector('.text1').classList.remove('visitor_cg');
        document.querySelector('.text1').classList.add('visitor');
        document.querySelector('.visimg').classList.remove('visimg2');
    }
    document.getElementById('bt2').onmouseover = function () {
        document.querySelector('.text2').classList.add('fad');
        document.querySelector('.text2').classList.add('visitor_cg');
        document.querySelector('.text2').classList.remove('leaguer');
    }
    document.getElementById('bt2').onmouseout = function () {
        document.querySelector('.text2').classList.remove('fad');
        document.querySelector('.text2').classList.remove('visitor_cg');
        document.querySelector('.text2').classList.add('leaguer');
    }
     // ----------------------------------------------------------------------------

    document.getElementById('bt2').onclick=function(){
        document.querySelector('.visimg').classList.add('fadeOut');
        
        document.querySelector('.leaimg').classList.add('slid');
        setTimeout(() => {
        document.querySelector('.visimg').classList.remove('vis_img');
        document.querySelector('.visimg').classList.add('visimg1');
        document.querySelector('.select0').classList.remove('select');
        document.querySelector('.select0').classList.add('select1');
        document.querySelector('.leaimg').classList.add('lea_img1');
        },1000);
        
    }
</script>

</html>